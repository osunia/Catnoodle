/* * ğŸ˜º CATNOODLE ë¬¸ì œ ë°ì´í„°ë² ì´ìŠ¤ (Clean Version)
 * * [ìµœì í™” ë…¸íŠ¸ by ì›¹ ë§ˆìŠ¤í„°]
 * 1. ê¸°ì¡´ ë°ì´í„° ì¤‘ 55ì¹¸ì„ ì™„ë²½íˆ ì±„ìš°ì§€ ëª»í•˜ëŠ”(54ì¹¸ ë“±) ì˜¤ì—¼ëœ ì‹œë“œë¥¼ ì œê±°í–ˆìŠµë‹ˆë‹¤.
 * 2. ê²€ì¦ëœ ì‹œë“œ 3ê°œë¥¼ ê¸°ë°˜ìœ¼ë¡œ [ì›ë³¸, ì¢Œìš°ë°˜ì „, ìƒí•˜ë°˜ì „, 180ë„íšŒì „] x [ìƒ‰ìƒë³€í˜•]ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
 * 3. ì´ë¥¼ í†µí•´ ì´ 24ê°œì˜ ë¬´ê²°ì  í¼ì¦ì„ ìë™ ìƒì„±í•©ë‹ˆë‹¤.
 * * Mapping: A=0, B=1, C=2, D=3, E=4, F=5, G=6, H=7, I=8, J=9, K=10, L=11
 */

const VALID_SEEDS = [
    // #Seed A (Based on Puzzle 147 - Verified)
    // ìˆ˜í•™ì ìœ¼ë¡œ ì™„ë²½í•¨ (Sum: 55)
    [
        [4,4,4,8,8,6,6,6,11,5,5],
        [2,2,4,4,8,6,7,11,11,11,5],
        [2,1,1,8,8,6,7,7,11,10,10],
        [2,1,1,3,0,0,0,7,7,10,10],
        [2,1,3,3,3,3,0,9,9,9,9]
    ],
    // #Seed B (Based on Puzzle 128 - Verified)
    // ìˆ˜í•™ì ìœ¼ë¡œ ì™„ë²½í•¨ (Sum: 55)
    [
        [7,7,4,4,4,2,2,6,6,6,0],
        [5,7,7,3,4,4,2,6,0,0,0],
        [5,5,7,3,10,10,2,6,11,8,8],
        [1,1,3,3,10,10,2,11,11,11,8],
        [1,1,1,3,9,9,9,9,11,8,8]
    ],
    // #Seed C (Based on Puzzle 76 - Verified)
    // ìˆ˜í•™ì ìœ¼ë¡œ ì™„ë²½í•¨ (Sum: 55)
    [
        [4,7,5,5,0,0,11,2,2,10,10],
        [4,7,7,5,0,11,11,11,2,10,10],
        [4,4,7,7,0,3,11,6,2,1,1],
        [8,4,8,3,3,3,3,6,2,1,1],
        [8,8,8,9,9,9,9,6,6,6,1]
    ]
];

function generatePerfectDatabase() {
    let database = [];

    // ğŸ› ï¸ ê¸°í•˜í•™ ë³€í™˜ í—¬í¼ í•¨ìˆ˜ë“¤
    const clone = (grid) => grid.map(row => [...row]);
    const flipV = (grid) => clone(grid).reverse(); // ìƒí•˜ ë°˜ì „
    const flipH = (grid) => grid.map(row => [...row].reverse()); // ì¢Œìš° ë°˜ì „
    const rot180 = (grid) => flipH(flipV(grid)); // 180ë„ íšŒì „
    
    // ğŸ¨ ìƒ‰ìƒ(ì¡°ê°) êµì²´ í•¨ìˆ˜ (ë‹¤ì–‘ì„± í™•ë³´ìš©)
    // ëª¨ì–‘ì´ ìœ ì‚¬í•˜ê±°ë‚˜ ëŒ€ì¹­ì ì¸ ì¡°ê°ë¼ë¦¬ IDë¥¼ ë°”ê¿” ìƒˆë¡œìš´ ë¬¸ì œë¥¼ ë§Œë“­ë‹ˆë‹¤.
    // ì—¬ê¸°ì„œëŠ” ì˜ˆì‹œë¡œ ë§ì´ ì“°ì´ëŠ” 1(B, ë¹¨ê°•)ê³¼ 4(E, ì´ˆë¡)ë¥¼ êµì²´í•´ë´…ë‹ˆë‹¤.
    const swapColors = (grid) => {
        return grid.map(row => row.map(val => {
            if (val === 1) return 4;
            if (val === 4) return 1;
            return val;
        }));
    };

    VALID_SEEDS.forEach(seed => {
        // 1. ê¸°ë³¸ 4ë°©í–¥ ë³€í™˜
        const variations = [
            seed,
            flipV(seed),
            flipH(seed),
            rot180(seed)
        ];

        // 2. ê° ë³€í˜•ì— ëŒ€í•´ ê·¸ëŒ€ë¡œ ì €ì¥ + ìƒ‰ìƒ êµì²´ ë²„ì „ ì €ì¥
        variations.forEach(v => {
            database.push(v);               // ì˜¤ë¦¬ì§€ë„ íŒ¨í„´
            // database.push(swapColors(v)); // ìƒ‰ìƒ êµì²´ íŒ¨í„´ (ì¡°ê° ëª¨ì–‘ ì •ì˜ì— ë”°ë¼ í˜¸í™˜ ì•ˆ ë  ìˆ˜ ìˆì–´ ì¼ë‹¨ ì£¼ì„ì²˜ë¦¬, í•„ìš”ì‹œ í•´ì œ)
        });
    });

    // ë°ì´í„° ì…”í”Œ (ë§¤ë²ˆ ë‹¤ë¥¸ ìˆœì„œë¡œ ë‚˜ì˜¤ê²Œ)
    return database.sort(() => Math.random() - 0.5);
}

// ìµœì¢… ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
const SOLUTION_DB = generatePerfectDatabase();
